<div class="modal-header">
    <h4 class="modal-title">Trigger Matcher</h4>
</div>
<div class="modal-body">
  <div>
    <div class="form-group">
      <label for="trigger">Trigger<span ng-show="trigger.trigger">: {{trigger.trigger}}</span></label>

      <div>
      <ul class="list-group bg-muted select-list">
        <li class="list-group-item" style="cursor: pointer;" ng-repeat="t in trigger_types | orderBy: '+name'" ng-click="matcher.trigger = t.name" ng-class="{'list-group-item-success': matcher.trigger == t.name}">
          {{t.name}}
        </li>
      </ul>
      </div>
    </div>
    <div class="form-group">
      <label for="trigger">Match<span ng-show="trigger.match_type">: {{trigger.match_type}}<span ng-show="trigger.match_type == 'device' && trigger.match">.{{trigger.match}}</span></span></label>
    </div>
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-6">

          <div class="form-group">
            <ul class="list-group bg-muted select-list" >
              <li class="list-group-item" style="cursor: pointer;" ng-repeat="t in match_types" ng-click="changeType(t.value)" ng-class="{'list-group-item-success': matcher.match_type == t.value}">
                <i class="{{t.icon}}"></i> {{t.name}}
              </li>
            </ul>
          </div>
        </div>
        <div class="col-sm-6">

          <div class="form-group">
            <div ng-show="matcher.match_type == 'device'">
              <div ng-show="devices_loading"><i class="icon-loadingalt spin"></i> Loading...</div>
              <ul class="list-group bg-muted select-list" ng-hide="devices_loading">
                <li class="list-group-item" style="cursor: pointer;" ng-repeat="device in devices | orderBy: '+name'" ng-click="changeDevice(device)" ng-class="{'list-group-item-success': matcher.match == device.name}">
                  {{device.name}}
                </li>
              </ul>
            </div>

            <div ng-show="matcher.match_type == 'room'">
              <div ng-show="rooms_loading"><i class="icon-loadingalt spin"></i> Loading...</div>
              <ul class="list-group bg-muted select-list" ng-hide="rooms_loading">
                <li class="list-group-item" style="cursor: pointer;" ng-repeat="room in rooms | orderBy: '+name'" ng-click="changeRoom(room)" ng-class="{'list-group-item-success': matcher.match == room.name}">
                  {{room.name}}
                </li>
              </ul>
            </div>

            <div ng-show="matcher.match_type == 'scene'">
              <div ng-show="scenes_loading"><i class="icon-loadingalt spin"></i> Loading...</div>
              <ul class="list-group bg-muted select-list" ng-hide="scenes_loading">
                <li class="list-group-item" style="cursor: pointer;" ng-repeat="scene in scenes | orderBy: '+name'" ng-click="changeScene(scene)" ng-class="{'list-group-item-success': matcher.match == scene.name}">
                  {{scene.name}}
                </li>
              </ul>
            </div>

            <div ng-show="matcher.match_type == 'time'" style="padding-left: 1em;">
              <epochtime time="matcher.match" disabled="{{matcher.match_type != 'time'}}"></epochtime>
            </div>

            <div ng-show="matcher.match_type == 'timeoffset'" style="padding-left: 1em;">
              <timeoffset time="matcher.match" disabled="{{matcher.match_type != 'timeoffset'}}"></timeoffset>
            </div>

            <div ng-show="matcher.match_type == 'string'" style="padding-left: 1em;">
              <input type="text" class="form-control" id="match" placeholder="String" required="" ng-model="matcher.match">
            </div>

            <div ng-show="matcher.match_type == 'number'" style="padding-left: 1em;">
              <input type="text" class="form-control" id="match" placeholder="Number" required="" ng-model="matcher.match">
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

</div>
<div class="modal-footer">
    <button class="btn btn-warning btn-sm" type="button" ng-click="cancel()">Cancel</button>
    <button class="btn btn-success btn-sm" type="button" ng-click="save()"><i class="icon-save-floppy"></i> Save</button>
</div>
